(this["webpackJsonpvc-greeting-card"]=this["webpackJsonpvc-greeting-card"]||[]).push([[0],{139:function(e,t){},144:function(e,t){},145:function(e,t){},155:function(e,t){},160:function(e,t){},188:function(e,t){},213:function(e,t){},241:function(e,t){},303:function(e,t,n){e.exports=n(531)},308:function(e,t,n){},335:function(e,t){},336:function(e,t){},346:function(e,t){},352:function(e,t){},363:function(e,t){},364:function(e,t){},382:function(e,t){},391:function(e,t){},393:function(e,t){},423:function(e,t){},424:function(e,t){},526:function(e,t){},528:function(e,t){},529:function(e,t,n){"use strict";n.r(t),function(e,t){var a=n(5),r=n.n(a),i=n(105),o=n(59),c=!("undefined"!==typeof e&&e.versions&&e.versions.node)&&("undefined"!==typeof window||"undefined"!==typeof self)?o.documentLoaders.xhr():o.documentLoaders.node();t.exports=function(e){return function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("wrappedDocumentLoader...",t),e.abrupt("return",c(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}.call(this,n(16),n(530)(e))},531:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),i=n(302),o=n.n(i),c=(n(308),n(78)),s=n(79),u=n(81),l=n(80),d=n(82),f=n(104),m=n.n(f),g=n(5),h=n.n(g),p=n(105),v=n(133),w=n.n(v),y=n(104),b=n(69).Ed25519KeyPair,E=n(146),C=n(504),k=E.suites.Ed25519Signature2018,D=n(511).driver().keyToDidDoc,O=n(529),j="https://source.unsplash.com/collection/433313/1280x1024",S=y.parse(window.location.search);var x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={issuerVerificationMethod:S.issuerVerificationMethod||"",toDID:"did:example:123",publicKeyBase58:S.publicKeyBase58||"",privateKeyBase58:S.privateKeyBase58||"",message:S.message||"",backgroundImage:j},n.makeCard=function(){var e=n.canvasA,t=n.canvasA.getContext("2d"),a=n.state.message,r=new Image;function i(e,n,a,r,i){var o=i||10,c=r||10;t.font=n.toString()+"px monospace",t.fillStyle=a,t.fillText(e,c,o)}r.src=n.state.backgroundImage,r.setAttribute("crossorigin","anonymous");r.onload=function(){t.drawImage(r,0,0,n.canvasA.width,n.canvasA.height),t.fillStyle="RGBA(255, 255, 255, 0.8)",t.fillRect(0,0,e.width,e.height/4),i("Message: "+a,8,"red",0,12),i("From: "+n.state.issuerVerificationMethod,8,"red",0,24),i("To: "+n.state.toDID,8,"red",0,36)}},n.convertCardToVC=Object(p.a)(h.a.mark((function e(){var t,a,r,i,o,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b(n.state),a=D(t),r=new k({issuerVerificationMethod:t.id,key:t}),i=n.canvasA.toDataURL("image/jpeg"),o={"@context":["https://www.w3.org/2018/credentials/v1","https://transmute-industries.github.io/vc-greeting-card/context/vc-greeting-card-v0.0.jsonld"],id:"https://example.com/credentials/1872",type:["VerifiableCredential","GreetingCard"],issuer:a.id,issuanceDate:(new Date).toISOString(),credentialSubject:{id:n.state.toDID},greetingCard:{image:i,message:n.state.message,from:n.state.issuerVerificationMethod,to:n.state.toDID}},e.next=7,C.issue({credential:o,suite:r,documentLoader:O({})});case 7:c=e.sent,s=window.location.href+"?vcgc="+w.a.encode(JSON.stringify(c)),window.location.href=s;case 10:case"end":return e.stop()}}),e)}))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.privateKeyBase58){e.next=6;break}return e.next=3,b.generate();case 3:t=e.sent,n=D(t),this.setState({issuerVerificationMethod:n.id,publicKeyBase58:t.publicKeyBase58,privateKeyBase58:t.privateKeyBase58});case 6:""===this.state.message&&this.setState({message:"Happy Holidays!"}),setTimeout((function(){a.makeCard()}),500);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"vc-greeting-card-options"},r.a.createElement("h3",null,"From Verification Method:"),r.a.createElement("input",{value:this.state.issuerVerificationMethod,onChange:function(t){e.setState({issuerVerificationMethod:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("h3",null,"From Private Key:"),r.a.createElement("input",{value:this.state.privateKeyBase58,onChange:function(t){e.setState({privateKeyBase58:t.target.value})}}),r.a.createElement("h3",null,"To DID:"),r.a.createElement("input",{value:this.state.toDID,onChange:function(t){e.setState({toDID:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("h3",null,"Message:"),r.a.createElement("input",{value:this.state.message,onChange:function(t){e.setState({message:t.target.value}),setTimeout((function(){e.makeCard()}),500)}}),r.a.createElement("br",null),r.a.createElement("h3",null,"Background: "),r.a.createElement("input",{value:this.state.backgroundImage,onChange:function(t){e.setState({backgroundImage:t.target.value}),setTimeout((function(){e.makeCard()}),500)}}),r.a.createElement("br",null),r.a.createElement("h3",null,r.a.createElement("button",{onClick:this.convertCardToVC},"Get VC Greeting Card"))),r.a.createElement("canvas",{style:{margin:"0 auto"},width:"400",height:"300",ref:function(t){return e.canvasA=t}}))}}]),t}(r.a.Component),B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={decoded:{}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({decoded:JSON.parse(w.a.decode(m.a.parse(window.location.search).vcgc))})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("pre",null,JSON.stringify(this.state.decoded,null,2)),this.state.decoded.greetingCard&&this.state.decoded.greetingCard.image&&r.a.createElement("img",{alt:"",src:this.state.decoded.greetingCard.image}))}}]),t}(r.a.Component),I=m.a.parse(window.location.search),K=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return I.vcgc?r.a.createElement(B,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t){},85:function(e,t){}},[[303,1,2]]]);
//# sourceMappingURL=main.630e8c59.chunk.js.map